<div class="holidays-banner snow-animation-container">
  <div class="container">
    <div class="banner-content">
      <div class="titles">
        <p class="main-title">BUNDLE DEALS</p>
        <p class="subtitle">FOR THE HOLIDAY SEASON</p>
        <p class="description">Get Free CuraLin + Our Delicious Cookbook with your Holiday Order!</p>
      </div>
      <a href="/collections/all">
          <button class="cta">LEARN MORE</button>
      </a>
    </div>
  </div>
</div>

{% schema %}

{
    "name": "Glucose Support Banner",
    "settings": [
        {
            "type": "image_picker",
            "id": "header_image",
            "label": "Header Image"
        }, {
            "type": "text",
            "id": "header_title",
            "label": "Title",
            "default": "Enter Title"
        }, {
            "type": "text",
            "id": "header_subtitle",
            "label": "Sub-Title",
            "default": "Enter Sub-Title"
        }, {
            "type": "text",
            "id": "button_title",
            "label": "Button Title",
            "default": "Enter Button Title"
        }, {
            "id": "button_link",
            "type": "url",
            "label": "Button Link"
        }
    ],
    "presets": [
        {
            "name": "Glucose Support Banner",
            "category": "image"
        }
    ]
}

{% endschema %}

{% style %}

@import url('https://fonts.googleapis.com/css2?family=Pridi&display=swap');


.holidays-banner {
  background-image: url("{{ 'holidays-banner-curalin-bg.png' | asset_url }}");
  background-size: contain;
  background-repeat: no-repeat;
  min-height: 600px;
}

.banner-content {
  font-size: 35px;
  margin-left: 15%;
  margin-top: 10%;
  max-width: 40%;
}

.titles {
  color: #C00101;
}

.subtitle {
  font-family: 'Pridi', serif;
  margin: 0;
  font-size: 2vw;
}

.main-title {
  font-family: 'Pridi', serif;
  margin: 0;
  font-size: 4vw;
}

.description {
  color: black;
  font-size: 1.5vw;
  line-height: 2vw;
}

.holidays-banner button {
  background-color: #28824F;
  color: white;
  font-weight: bold;
  border: unset;
  border-radius: 3px;
  padding: 10px 40px;
  box-shadow: 0px 2.9px 2.9px rgba(0, 0, 0, 0.25);
  font-size: 25px;
}

.snow-animation-container {
	width: 100%;
	height: 100%;
	overflow: hidden;
}

@media screen and (max-width: 760px){
  .holidays-banner {
    background-image: url("{{ 'holidays-banner-curalin-bg-mobile.png' | asset_url }}");
    height: calc(100vh - 50px);
	background-size: cover;
    background-position: bottom;
  }

  .banner-content {
    text-align: center;
    margin: 30px 10px;
    max-width: unset;
  }

  .banner-content .main-title {
    font-size: 44px;
    font-weight: bold;
  }

  .banner-content .subtitle {
    font-size: 25px;
  }

  .banner-content .description {
    font-size: 18px;
    line-height: 2rem;
  }

  .banner-content button {
    font-size: 20px;
}
}

{% endstyle %}

{% javascript %}
$(document).ready(documentReady);

function documentReady()
{
	var MAX_SNOW 		= 300;

	var MAX_SNOW_SIZE 	= 7;

	var MAX_SNOW_SPEED 	= 3;

	snowStart();

	function snowStart() {

		console.log("// Snow animation start");

		createSnows();
	}

	function createSnows() {

		var container = $(".snow-animation-container");

		for (var i = 0; i < MAX_SNOW; i++) {

			var appendItem	= getRandomItem(i);
			container.append(appendItem);

			var animateItem = $(".snow" + String(i));
			var randomTime 	= Math.random() * MAX_SNOW_SPEED;
			goAnimate(animateItem, i, randomTime);
			goAnimate2(animateItem);
		};

		console.log("// Create snows");
	}

	function goAnimate(item, id, randomTime) {
		TweenMax.to(item, randomTime, {css:{marginTop:"+=100"}, ease:Linear.easeNone, onComplete:function() { 

			var topPosition = item.css("margin-top").replace("px","");

			if (topPosition > $(window).height()) {
				changePosition(item);
				randomTime = Math.random() * MAX_SNOW_SPEED;
				goAnimate(item, id, randomTime);
			}
			else {
				goAnimate(item, id, randomTime);
			}

		}});
	}

	function goAnimate2(item) {

		var directionTime 	= 1 + Math.floor( Math.random() * 5 );

		var randomDirection = 1 + Math.floor( Math.random() * 4 );

		var delayTime		= 1 + Math.floor( Math.random() * 3 );

		if (randomDirection == 1){

			TweenMax.to(item, directionTime, {css:{marginLeft:"+=100"}, ease:Linear.easeOut, onComplete:function() {

				TweenMax.to(item, directionTime, {css:{marginLeft:"-=100"}, delay:delayTime, ease:Linear.easeOut, onComplete:function() { 

					goAnimate2(item);

				}});
			}});
		}
		else if(randomDirection == 2)
		{

			TweenMax.to(item, directionTime, {css:{marginLeft:"-=100"}, ease:Linear.easeOut, onComplete:function() { 

				TweenMax.to(item, directionTime, {css:{marginLeft:"+=100"}, delay:delayTime, ease:Linear.easeOut, onComplete:function() { 

					goAnimate2(item);

				}});
			}});
		}
		else if(randomDirection == 3)
		{

			TweenMax.to(item, directionTime, {css:{marginLeft:"+=100"}, ease:Linear.easeOut, onComplete:function() { 

				goAnimate2(item);

			}});
		}
		else if(randomDirection == 4)
		{

			TweenMax.to(item, directionTime, {css:{marginLeft:"-=100"}, ease:Linear.easeOut, onComplete:function() { 

				goAnimate2(item);

			}});
		}
	}

	function changePosition(item) {
		var _width 	= Math.floor( Math.random() * MAX_SNOW_SIZE );
		var _height = _width;
		var _blur 	= Math.floor( Math.random() * 5+2 );
		var _left 	= Math.floor( Math.random() * ($(window).width() - _width) );
		var _top 	= -$(window).height() + Math.floor( Math.random() * ($(window).height() - _height) );

		item.css("width", _width);
		item.css("height", _height);
		item.css("margin-left", _left);
		item.css("margin-top", _top);
		item.css("-webkit-filter", "blur(" + String(_blur) + "px)");
		item.css("-moz-filter", "blur(" + String(_blur) + "px)");
		item.css("-o-filter", "blur(" + String(_blur) + "px)");
		item.css("-ms-filter", "blur(" + String(_blur) + "px)");
		item.css("filter", "blur(" + String(_blur) + "px)");
	}

	function getRandomItem(id) {
		var _width 	= Math.floor( Math.random() * MAX_SNOW_SIZE );
		var _height = _width;
		var _blur 	= Math.floor( Math.random() * 5+2 );
		var _left 	= Math.floor( Math.random() * ($(window).width() - _width) );
		var _top 	= -$(window).height() + Math.floor( Math.random() * ($(window).height() - _height) );
		var _id 	= id;

		return getSmallSnow(_width, _height, _blur, _left, _top, _id);
	}

	function getSmallSnow(width, height, blur, left, top, id) {

		var item = "<div class='snow" + id + "' style='position:absolute; margin-left: " + left + "px; margin-top: " + top + "px; width: " + width + "px; height: " + height + "px; border-radius: 50%; background-color: white; -webkit-filter: blur(" + blur +"px); -moz-filter: blur(" + blur + "px); -o-filter: blur(" + blur + "px); -ms-filter: blur(" + blur + "px); filter: blur(" + blur + "px);'></div>"

		return item;
	}


}


{% endjavascript %}