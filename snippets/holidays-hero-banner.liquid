<div class="hero-banner">
  <div class="container">
    <div class="snowflakes">
      {% for i in (1..4) %}
        <div class="snowflake">
          <img src="{{ "hs-snowflake-0" | append: i | append: ".png" | asset_url }}" alt="" loading="lazy">
        </div>
      {% endfor %}
    </div>

    {% case request.path %}
      {% when '/' %}
        {% render "holidays-hero-banner-content-homepage" %}
      {% when '/pages/curalin-advanced-glucose-support' %}
        {% render "holidays-hero-banner-content-curalin" %}
    {% endcase %}
  </div>
  <div class="bottom-snow">
    <img src="{{ 'hs-bottom-snow.png' | asset_url }}" alt="bottom-snow" loading="lazy">
  </div>
</div>

<style>
  .snowflake {
    position: absolute;
    z-index: -1;
  }

  .snowflake img {
    max-width: 70%;
  }

  .snowflake:nth-child(4){
    top:0;
    left: 50px;
    height: max(150px, 20vw);
  }

  .snowflake:nth-child(3){
    top:0;
    left: 120px;
  }

  .snowflake:nth-child(2){
    top:0;
    right: 150px;
  }

  .snowflake:nth-child(1){
    top:0;
    right: 50px;
  }

  .hero-banner {
    position: relative;
    background-color: #B5141F;
    overflow: hidden;
    height: max(300px,27vw);
  }

  .hero-banner .bottom-snow {
    position: absolute;
    bottom: 0;
    z-index: 0;
    width: 100%;
  }

  .hero-banner .bottom-snow img {
    width: 100%;
  }

  .hero-banner .container {
    height: 100%;
    position: relative;
    z-index: 0;
  }

  @media screen and (max-width: 1008px){
    .snowflake img {
        max-width: 50%;
    }

    .snowflake:nth-child(3) {
        left: 6vw;
    }

    .snowflake:nth-child(4) {
        left: 2vw;
    }

    .hero-banner .container .holiday-sale .text-button {
        left: 11vw;
        padding-top: 6vw;
    }
  }

  @media screen and (max-width: 760px) {
    .snowflake:nth-child(1) {
      display: none;
    }

    .snowflake:nth-child(4) {
      display: none;
    }

    .snowflake:nth-child(2) {
      right: 3vw;
    }

    .snowflake:nth-child(3) {
      left: unset;
      right: 8vw;
    }
    .hero-banner {
      height: max(85vw, 32vw);
    }
  }


  @media screen and (max-width: 566px){
    .hero-banner {
        height: max(95vw, 32vw);
    }
  }

  @media screen and (max-width: 375px){
    .snowflake:nth-child(2) {
      right: -4vw;
    }

    .snowflake:nth-child(3) {
      right: 0vw;
    }

    .hero-banner {
        height: max(118vw, 32vw);
    }
  }
</style>

{%- comment -%} Sparkles {%- endcomment -%}
<script>
  (function($, window, document) {

    $.fn.sparkle = function(options) {
      $.destroySparkle = $.destroySparkle || {};
      var id = this.data("sparkle-id") || (new Date()).getTime() + Math.random();

      if (options === "destroy" && this.find("svg").length > 0) {
        $.destroySparkle[id] = true;
        this.data("sparkle-id", null);
      }

      var $this = this;
      var settings = $.extend({
        fill: "#fff",
        stroke: "#000",
        size: 20,
        delay: 0,
        duration: 1500,
        pause: 1000
      }, options);
      var cssAnimationAttr = "my-sparkle " + settings.duration + "ms infinite linear";

      var $star = $('<svg class="my-sparkle" version="1.1" viewBox="0.0 0.0 50.0 50.0" fill="none" stroke="none" stroke-linecap="square" stroke-miterlimit="10" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><clipPath id="p.0"><path d="m0 0l50.0 0l0 50.0l-50.0 0l0 -50.0z" clip-rule="nonzero"></path></clipPath><g clip-path="url(#p.0)"><path fill="' + settings.stroke + '" fill-opacity="0.0" d="m0 0l50.0 0l0 50.0l-50.0 0z" fill-rule="nonzero"></path><path fill="' + settings.fill + '" d="m0.62204725 25.0l20.068499 -4.323374l4.309454 -20.13332l4.309454 20.13332l20.068499 4.323374l-20.068499 4.323374l-4.309454 20.133318l-4.309454 -20.133318z" fill-rule="nonzero"></path><path stroke="' + settings.stroke + '" stroke-width="1.0" stroke-linejoin="round" stroke-linecap="butt" d="m0.62204725 25.0l20.068499 -4.323374l4.309454 -20.13332l4.309454 20.13332l20.068499 4.323374l-20.068499 4.323374l-4.309454 20.133318l-4.309454 -20.133318z" fill-rule="nonzero"></path></g></svg>').css({
          position: "absolute",
          width: settings.size,
          height: settings.size,
          zIndex: 9999
      });

      var w = this.width();
      var h = this.height();

      var getCoordinates = function() {
        return {
          left: Math.random() * w,
          top: Math.random() * h
        };
      };

      var placeStar = function(init) {
        var coords = getCoordinates();

        if (init) {
          $this.append($star);
        }

        $star.css({
          "-moz-animation": cssAnimationAttr,
          "-webkit-animation": cssAnimationAttr,
          animation: cssAnimationAttr,
          display: "block",
          left: coords.left,
          top: coords.top
        });

        window.setTimeout(function() {
          $star.css({
            "-moz-animation": null,
            "-webkit-animation": null,
            animation: null,
            display: "none"
          });

          if (!$.destroySparkle[id]) {
            window.setTimeout(function() {
              placeStar(false);
            }, settings.pause);
          } else {
            $star.remove();
          }
        }, settings.duration);
      };

      if (this.css("position") === "static") {
        this.css("position", "relative");
      }

      if (!$.destroySparkle[id]) {
        window.setTimeout(function() {
          placeStar(true);
        }, settings.delay);

        this.data("sparkle-id", id);
      }

      return this;
    };

  })(jQuery, window, document);
</script>

<style>
  @-moz-keyframes my-sparkle {
    0%   {
      opacity: 0;
      -moz-transform: rotate(0deg) scale(0);
    }
    50%  {
      opacity: 1;
      -moz-transform: rotate(360deg) scale(1);
    }
    100% {
      opacity: 0;
      -moz-transform: rotate(720deg) scale(0);
    }
  }

  @-webkit-keyframes my-sparkle {
    0%   {
      opacity: 0;
      -webkit-transform: rotate(0deg) scale(0);
    }
    50%  {
      opacity: 1;
      -webkit-transform: rotate(360deg) scale(1);
    }
    100% {
      opacity: 0;
      -webkit-transform: rotate(720deg) scale(0);
    }
  }

  @keyframes my-sparkle {
    0%   {
      opacity: 0;
      transform: rotate(0deg) scale(0);
    }
    50%  {
      opacity: 1;
      transform: rotate(360deg) scale(1);
    }
    100% {
      opacity: 0;
      transform: rotate(720deg) scale(0);
    }
  }
</style>

<script>
  $('.hero-banner').sparkle();
  $('.holiday-title').sparkle();
</script>