<section class="cta-section">
  <div class="container product-container">
    {% render 'product-all-in-one-cta-section-gallery' %}

    <div class="product-info">
      <h1>{% if product.metafields.my_fields.alternative_title.value %}{{ product.metafields.my_fields.alternative_title.value }}{% else %}{{ product.title }}{% endif %}</h1>

      {% render 'product-all-in-one-cta-section-reviews', isQuotes: isReviewsQuotes  %}
    </div>

    {% if badgesPosition == "cta" %}
      {% render 'product-all-in-one-cta-section-actions', title: "Select Your Deal", isBadges: true, challenge_value: challenge_value, curaeats_value: curaeats_value %}
    {% endif %}
  </div>

  {% if badgesPosition == "bottom" %}
    {% render 'trust-badges-widget', content: "free-shipping,money-back,secure-checkout", colors: "#5c5c5c", bottomLine: true %}
  {% endif %}
</section>

<div class="container line" style="border-bottom: 1px solid var(--light-green)"></div>

<style>
  section {
    padding: 50px 0
  }

  .cta-section .product-container {
    display: grid;
    grid-template-columns: 60% 40%;
    grid-column-gap: 0;
    grid-row-gap: 0;
  }

  .cta-section .product-container .product-info {
    padding: unset;
    width: unset;
    max-width: 450px;
    grid-area: 1/2/2/3;
  }

  .cta-section .product-container .product-info h1 {
    font-weight: 600;
    font-size: 40px;
  }

  @media screen and (max-width: 1270px) {
    .container {
      max-width: unset;
      padding: 0 20px;
    }
  }

  @media screen and (max-width: 768px) {
    section {
      padding: 8vw 0;
    }

    .container {
      padding: 0 20px !important;
    }

    .cta-section {
      padding-top: 70px;
      padding-bottom: 0;
    }

    .cta-section .product-container {
      grid-template-columns: repeat(1, 100%);
      grid-template-rows: unset;
      padding: 0 20px 20px;
    }

    .cta-section .product-container .product-info {
      grid-area: unset;
      grid-row: 1;
      text-align: center;
      padding: 0 20px;
      max-width: unset
    }
  }
</style>

<script>
  productThumbsAllInOne = new Swiper('#product-thumbs-slider-sc', {
    slidesPerView: 4,
    spaceBetween: 10,
    watchSlidesVisibility: true,
    grabCursor: true,
    loop: false,
    navigation: {
      nextEl: '#product-thumbs-slider-nav-next',
      prevEl: '#product-thumbs-slider-nav-prev',
      disabledClass: 'disabled'
    },
    breakpoints: {
      760: {
        slidesPerView: 1,
      },
      1080: {
        slidesPerView: 2,
      },
      1200: {
        slidesPerView: 3,
      },
      1400: {
        slidesPerView: 4,
      }
    }
  });

  productSliderAllInOne = new Swiper('#product-main-slider-sc', {
    slidesPerView: 1,
    spaceBetween: 15,
    centeredSlides: true,
    watchSlidesVisibility: false,
    loop: false,
    slideToClickedSlide: true,
    thumbs: {swiper: productThumbsAllInOne},
    breakpoints: {
      0: {
        pagination: {
          el: '.product-slider .swiper-pagination',
          clickable: 'true',
          type: 'bullets',
        },
        navigation: {
          nextEl: '#product-main-slider-nav-next',
          prevEl: '#product-main-slider-nav-prev',
          disabledClass: 'disabled'
        }
      },
      760: {
        pagination: {},
        navigation: {}
      }
    }
  });

  // Slide to Variant Image
  productSliderAllInOne.on('slideChange', function () {
    $('iframe#product-video-iframe').attr( 'src', function ( i, val ) { return val; });
  });

  $('.thumbs-img').click(function() {
    woopra.track('Product Image Click', {});
  });
</script>

<script>
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    event: 'view_item',
    ecommerce: {
      items: [{
        item_name: '{{ product.title }}',
        item_id: '{{ product.title }}',
        affiliation: '{{ shop.name }}',
        price: '',
        currency: '{{ shop.currency }}',
        item_brand: 'CuraLife',
        item_category: 'CuraLin',
        quantity: 1
      }]
    },
    email: '{{ customer.email }}',
    phone: '{{ customer.phone }}',
    name: '{{ customer.first_name }}',
    surname: '{{ customer.last_name }}',
    city: '{{ customer.customer_address.city }}',
    state: '{{ customer.customer_address.province }}',
    zip: '{{ customer.customer_address.zip }}',
    country: '{{customer.customer_address.country_code | t}}',
    user_agent: navigator.userAgent
  });

  // Product Arrow Click
  $('#product-thumbs-slider-nav-next, #product-thumbs-slider-nav-prev').click(function() {
    woopra.track('Arrow Click', { section: "Product" });
  });
</script>