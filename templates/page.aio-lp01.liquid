{% layout 'theme.lps' %}

{% render 'layout.head.geo-redirect-script' %}
{% render 'layout.head.redirects-script' %}
{% render 'layout.head.google-tag-manager'%}
{% render 'layout.head.meta-tags' %}
{% render 'layout.head.canonicals-us' %}
{% render 'layout.head.fonts' %}

<!-- Stylesheets -->
<link rel="preload" href="{{ 'common.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<link rel="preload" href="{{ 'styles.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">

<!-- Swiper Import -->
<link rel="preload" href="{{ 'swiper.min.css' | asset_url }}" as="style" onload="this.onload=null;this.rel='stylesheet'">
<script src="{{ 'swiper.min.js' | asset_url}}"></script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
 <script type="module" src="https://cdn.jsdelivr.net/npm/@slightlyoff/lite-vimeo@0.1.1/lite-vimeo.js"></script>

 <script src="{{ 'libs.js' | asset_url }}"></script>

<div class="page-overflow">
    {% section 'lps-aio-lp01-header' %}
    {% section 'lps-aio-lp01-hero' %}
    {% section 'lps-featured-on' %}
    {% section 'lps-video-reviews' %}
    {% section 'lps-instructions' %}
    {% section 'lps-satisfaction-survey' %}
    {% section 'lps-trusted-by-doctors' %}
    {% section 'lps-doctors-testimonials' %}
    {% section 'lps-clinically-tested' %}
    {% section 'lps-ingredients' %}
    {% section 'lps-supported-community' %}
    {% section 'lps-products-catalog' %}
    {% section 'lps-return-policy' %}
    {% section 'lps-badges' %}
    {% section 'lps-faq' %}
    {% section 'lps-contact-us' %}
    {% section 'lps-sources' %}

    <div id="floating-cta">ORDER NOW</div>
</div>

<style>
    .real-changes .sub-title {
        border-top: unset !important;
    }

    .featured-section {
        border-bottom: 1px solid #DCD9D9;
    }

    #floating-cta {
    position:fixed;
    right:0;
    bottom:0;
    cursor:pointer;
    width:100%;
    height:60px;
    background-color:var(--green);
    z-index: 10;
    display:none;
    color: white;
    padding: 5px;
    font-weight: 600;
    font-size: 40px;
    text-align: center;
}
</style>

<script>
    $("#floating-cta").click(function() {
    $([document.documentElement, document.body]).animate({
        scrollTop: $("#product-section").offset().top + 130
    }, 2000);
});

if ($(window).width() < 761) {
    $(window).scroll(function(){
            if ($(this).scrollTop() > 800 && $(this).scrollTop() < ($("#product-section").offset().top - 1000)) {
                $('#floating-cta').fadeIn();
            } else {
                $('#floating-cta').fadeOut();
            }
        });
}
</script>

<script>
  const urlParams = new URLSearchParams(window.location.search);

  if (urlParams.has('shipping')) {
    console.log("shipping")
    $("#shipping-badge-text").text("Free Worldwide Shipping")
    $("#shipping-badge-text-2").text("Free Worldwide Shipping")
    $("#shipping-line").hide();
    $("#shipping-line-above").show();
  }
</script>

<script>
    $(document).on("click", ".cta-btn", function () {
      console.log("add to cart event");
          window.dataLayer  = window.dataLayer || [];
          window.dataLayer.push({
            'event': 'eec.addToCart',       // name of an event. In this case, always stays as eec.addToCart
            'ecommerce': {                  // ecommerce object. This is the essential part of tracking. New EE data must always be pushed to this object
              'currencyCode': '{{shop.currency}}',          // the currency which is currently used by a visitor
              'add': {                        // name of an action. In this case, always stays as add
              'actionField': {
              'list': 'main'          // optional. name of a list from which the product was added to a cart
            },
            'products': [{              // list of products added to a cart. Can contain multiple products at the same time
              'name': $(this).attr('prod-title'),      // name of a product that was added to a cart
              'id': $(this).attr('prod-id'),       // id of a product
              'price': $(this).attr('prod-price').substring(1),      // price of a product
              'category': 'Simple',
              'variant': '',   // category of a product
              'quantity': 1
            }]
          }
        },
        'userId': '{{ customer.id }}',
        'email': '{{ customer.email }}',
        'country': '{{customer.customer_address.country_code }}',
        'city': '{{customer.customer_address.city }}',
        'name': '{{ customer.first_name }}',
        'surname': '{{ customer.last_name }}',
        'phone_number': '{{customer.phone }}',
        'state': '{{customer.customer_address.province }}',       //state or province
        'zip': '{{customer.customer_address.zip }}'         //ZIP or Postal code
        });
    });
</script>